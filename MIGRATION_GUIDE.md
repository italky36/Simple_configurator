# –ú–∏–≥—Ä–∞—Ü–∏—è: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ü–≤–µ—Ç–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫

## –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã–±–æ—Ä–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–æ—Ñ–µ–º–∞—à–∏–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ü–≤–µ—Ç–∞ –∫–æ—Ä–ø—É—Å–∞ –∏ —Ü–≤–µ—Ç–∞ –≤—Å—Ç–∞–≤–∫–∏.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `design_images` –≤ —Ç–∞–±–ª–∏—Ü—É `coffee_machines` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ü–≤–µ—Ç–æ–≤.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```json
{
  "–±–µ–ª—ã–π": {
    "–∂—ë–ª—Ç—ã–π": {
      "main_image": "URL –∏–ª–∏ –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é",
      "main_image_path": "–ü—É—Ç—å –≤ Seafile",
      "gallery_folder": "–ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –≥–∞–ª–µ—Ä–µ–µ–π"
    },
    "–∑–µ–ª—ë–Ω—ã–π": {...},
    "–∫—Ä–∞—Å–Ω—ã–π": {...},
    "—Å–µ—Ä—ã–π": {...},
    "—Å–∏–Ω–∏–π": {...},
    "—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π": {...}
  },
  "—á—ë—Ä–Ω—ã–π": {
    "–∂—ë–ª—Ç—ã–π": {...},
    ...
  }
}
```

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:

```bash
python scripts/add_design_images_column.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ SQL

–ï—Å–ª–∏ —É –≤–∞—Å SQLite:

```bash
sqlite3 path/to/your/database.db "ALTER TABLE coffee_machines ADD COLUMN design_images TEXT;"
```

–î–ª—è PostgreSQL:

```sql
ALTER TABLE coffee_machines ADD COLUMN design_images JSONB;
```

–î–ª—è MySQL:

```sql
ALTER TABLE coffee_machines ADD COLUMN design_images JSON;
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ –º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ:

```bash
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
rm -f *.db

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
python scripts/init_db.py
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏

### –í –∞–¥–º–∏–Ω–∫–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—ã
2. **–ï—Å–ª–∏ –∫–∞—Ä–∫–∞—Å = "–ù–µ—Ç":**
   - –°–µ–∫—Ü–∏—è "–¶–≤–µ—Ç–∞ –¥–∏–∑–∞–π–Ω–∞" –±—É–¥–µ—Ç —Å–∫—Ä—ã—Ç–∞
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω—ã–µ –ø–æ–ª—è "Main image" –∏ "Gallery folder"
3. **–ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞—Ä–∫–∞—Å:**
   - –°–µ–∫—Ü–∏—è "–¶–≤–µ—Ç–∞ –¥–∏–∑–∞–π–Ω–∞ (–∫–æ—Ä–ø—É—Å √ó –≤—Å—Ç–∞–≤–∫–∞)" —Å—Ç–∞–Ω–µ—Ç –≤–∏–¥–∏–º–æ–π
   - –û–±—ã—á–Ω—ã–µ –ø–æ–ª—è "Main image" –∏ "Gallery folder" —Å—Ç–∞–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–º–∏
   - –†–∞—Å–∫—Ä–æ–π—Ç–µ –∞–∫–∫–æ—Ä–¥–µ–æ–Ω—ã –¥–ª—è –±–µ–ª–æ–≥–æ –∏–ª–∏ —á—ë—Ä–Ω–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ü–≤–µ—Ç–∞ –≤—Å—Ç–∞–≤–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
     - –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ
     - –ü–∞–ø–∫—É —Å –≥–∞–ª–µ—Ä–µ–µ–π
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "Seafile" –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ Seafile

### –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç:
1. –í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç –∫–æ—Ä–ø—É—Å–∞ (–±–µ–ª—ã–π/—á—ë—Ä–Ω—ã–π)
2. –í—ã–±—Ä–∞—Ç—å —Ü–≤–µ—Ç –≤—Å—Ç–∞–≤–∫–∏ (–∂—ë–ª—Ç—ã–π, –∑–µ–ª—ë–Ω—ã–π, –∫—Ä–∞—Å–Ω—ã–π, —Å–µ—Ä—ã–π, —Å–∏–Ω–∏–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
3. –£–≤–∏–¥–µ—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:**
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á—ë—Ä–Ω—ã–π –∫–æ—Ä–ø—É—Å
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–∏–Ω–∏–π —Ü–≤–µ—Ç –≤—Å—Ç–∞–≤–∫–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ñ–æ—Ç–æ –¥–ª—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ "—á—ë—Ä–Ω—ã–π + —Å–∏–Ω–∏–π" (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ –∞–¥–º–∏–Ω–∫–µ)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –≤ Seafile

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –≤ Seafile:

```
üìÅ [–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ—Ñ–µ–º–∞—à–∏–Ω—ã]
   ‚îî‚îÄ‚îÄ üìÅ [–ú–æ–¥–µ–ª—å –∫–∞—Ä–∫–∞—Å–∞]
         ‚îú‚îÄ‚îÄ üìÅ –±–µ–ª—ã–π
         ‚îÇ     ‚îú‚îÄ‚îÄ üìÅ –∂—ë–ª—Ç—ã–π
         ‚îÇ     ‚îÇ     ‚îú‚îÄ‚îÄ main.jpg
         ‚îÇ     ‚îÇ     ‚îî‚îÄ‚îÄ üìÅ gallery
         ‚îÇ     ‚îú‚îÄ‚îÄ üìÅ –∑–µ–ª—ë–Ω—ã–π
         ‚îÇ     ‚îú‚îÄ‚îÄ üìÅ –∫—Ä–∞—Å–Ω—ã–π
         ‚îÇ     ‚îú‚îÄ‚îÄ üìÅ —Å–µ—Ä—ã–π
         ‚îÇ     ‚îú‚îÄ‚îÄ üìÅ —Å–∏–Ω–∏–π
         ‚îÇ     ‚îî‚îÄ‚îÄ üìÅ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
         ‚îî‚îÄ‚îÄ üìÅ —á—ë—Ä–Ω—ã–π
               ‚îú‚îÄ‚îÄ üìÅ –∂—ë–ª—Ç—ã–π
               ‚îú‚îÄ‚îÄ üìÅ –∑–µ–ª—ë–Ω—ã–π
               ‚îú‚îÄ‚îÄ üìÅ –∫—Ä–∞—Å–Ω—ã–π
               ‚îú‚îÄ‚îÄ üìÅ —Å–µ—Ä—ã–π
               ‚îú‚îÄ‚îÄ üìÅ —Å–∏–Ω–∏–π
               ‚îî‚îÄ‚îÄ üìÅ —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
```

## API –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `/api/coffee-machines`

- `frame_color` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ü–≤–µ—Ç –∫–æ—Ä–ø—É—Å–∞ (–±–µ–ª—ã–π/—á—ë—Ä–Ω—ã–π)
- `insert_color` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ü–≤–µ—Ç –≤—Å—Ç–∞–≤–∫–∏

–ü—Ä–∏–º–µ—Ä:
```
GET /api/coffee-machines?include_gallery=true&frame_color=–±–µ–ª—ã–π&insert_color=–∂—ë–ª—Ç—ã–π
```

–ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ –æ–±–æ–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ API –≤–µ—Ä–Ω–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Ü–≤–µ—Ç–æ–≤ –∏–∑ `design_images`.
